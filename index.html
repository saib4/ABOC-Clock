<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ABOC Live Clock</title>
  <style>
    :root { --bg:#0b1020; --fg:#e7ecff; --muted:#9aa3c7; --card:#11183a; }
    html, body { height: 100%; margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif; background: var(--bg); color: var(--fg); }
    .wrap { max-width: 900px; margin: 0 auto; padding: 32px 20px 64px; }
    h1 { margin: 0 0 12px; font-size: 28px; font-weight: 700; letter-spacing: .3px; }
    .desc { color: var(--muted); margin-bottom: 24px; }
    .card { background: var(--card); border-radius: 16px; padding: 20px; box-shadow: 0 10px 20px rgba(0,0,0,.25); }
    .grid { display: grid; grid-template-columns: 1fr; gap: 16px; }
    .big { font-size: clamp(28px, 5vw, 48px); font-weight: 800; letter-spacing: .5px; }
    .label { color: var(--muted); font-size: 13px; text-transform: uppercase; letter-spacing: .12em; margin-bottom: 6px; }
    .row { display: grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap: 16px; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; }
    .muted { color: var(--muted); }
    .cfg { margin-top: 18px; font-size: 12px; color: var(--muted); }
    .foot { margin-top: 28px; color: var(--muted); font-size: 12px; }

    .converter { background: var(--card); border-radius: 16px; padding: 20px; margin-top: 40px; }
    .converter h2 { margin-top: 0; }
    .converter input { width: 100%; padding: 8px; font-size: 14px; margin-top: 4px; margin-bottom: 12px; background: #1a2347; color: white; border: 1px solid #333; border-radius: 6px; }
    .converter button { padding: 8px 12px; background: #2a3b6a; color: white; border: none; border-radius: 6px; cursor: pointer; margin-top: 4px; }
    .converter button:hover { background: #3c4c7a; }
    .converter .output { margin-top: 10px; font-weight: bold; }
    @media (max-width: 640px) { .row { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>ABOC Live Clock</h1>
    <div class="desc">Live conversion of real time to ABOC time (<strong>2 IRL hours = 1 ABOC day</strong>, <strong>1 IRL month = 1 ABOC year</strong>).</div>

    <div class="card grid">
      <div>
        <div class="label">ABOC Date &amp; Time</div>
        <div id="abocDate" class="big mono">Loadingâ€¦</div>
      </div>

      <div class="row">
        <div>
          <div class="label">Now (IRL)</div>
          <div id="irlNow" class="mono"></div>
        </div>
        <div>
          <div class="label">Time Elapsed Since Lore Start (IRL)</div>
          <div id="irlElapsed" class="mono"></div>
        </div>
      </div>

      <div class="row">
        <div>
          <div class="label">What date(s) did Lore start? (IRL â†’ ABOC)</div>
          <div id="epochInfo" class="mono"></div>
        </div>
        <div>
          <div class="label">Scale</div>
          <div class="mono">2h IRL = 1 day ABOC â€¢ 30 IRL days = 1 year ABOC (360â€‘day year)</div>
        </div>
      </div>

      <div class="cfg">
        Tip: All Lords and event organizers can include the in-lore ABOC date and time for their events or requests. This ensures proper timeline tracking, avoids scheduling conflicts, and maintains consistency with the realm's ongoing chronology.
      </div>
    </div>

    <div class="converter">
      <h2>ðŸ§² IRL â†” ABOC Converter</h2>
      <div>
        <label>Convert IRL Date to ABOC:</label>
        <input type="datetime-local" id="irlInput" />
        <button onclick="convertIRLtoABOC()">Convert to ABOC</button>
        <div id="abocOutput" class="output"></div>
      </div>

      <hr style="margin: 20px 0; border: 1px solid #1f2a4c" />

      <div>
        <label>Convert ABOC Date to IRL:</label>
        <input type="text" id="abocInput" placeholder="YYYY-MM-DD" />
        <button onclick="convertABOCtoIRL()">Convert to IRL</button>
        <div id="irlOutput" class="output"></div>
      </div>
    </div>

    <div class="foot">
      ABOC day length = 24 ABOC hours â‡’ 1 ABOC hour = 5 IRL minutes; 1 ABOC second â‰ˆ 0.0833 IRL seconds.
    </div>
  </div>

  <script>
    const IRL_EPOCH_ISO = '2025-07-15T00:00:00Z';
    const ABOC_EPOCH = { year: 282, month: 5, day: 22, hour: 0, minute: 0, second: 0 };
    const IRL_HOURS_PER_ABOC_DAY = 2;
    const IRL_DAYS_PER_ABOC_YEAR = 30;
    const ABOC_DAYS_PER_YEAR = 360;
    const ABOC_DAYS_PER_MONTH = 30;
    const SECS_PER_ABOC_DAY = 86400;
    const MS_PER_IRL_HOUR = 3600000;
    const MS_PER_ABOC_DAY_IRL = IRL_HOURS_PER_ABOC_DAY * MS_PER_IRL_HOUR;

    const irlEpoch = new Date(IRL_EPOCH_ISO);

    function abocEpochInDays() {
      const { year, month, day, hour, minute, second } = ABOC_EPOCH;
      return year * 360 + (month - 1) * 30 + (day - 1) + ((hour * 3600 + minute * 60 + second) / SECS_PER_ABOC_DAY);
    }

    function abocFromTotalDays(days) {
      const year = Math.floor(days / 360);
      days %= 360;
      const month = Math.floor(days / 30);
      days %= 30;
      const day = Math.floor(days) + 1;
      const seconds = (days % 1) * SECS_PER_ABOC_DAY;
      const hour = Math.floor(seconds / 3600);
      const minute = Math.floor((seconds % 3600) / 60);
      const second = Math.floor(seconds % 60);
      return { year, month: month + 1, day, hour, minute, second };
    }

    function getOrdinalSuffix(n) {
      return n % 10 === 1 && n % 100 !== 11 ? 'st' :
             n % 10 === 2 && n % 100 !== 12 ? 'nd' :
             n % 10 === 3 && n % 100 !== 13 ? 'rd' : 'th';
    }

    function formatABOCDateFancy(dt) {
      return `${dt.day}${getOrdinalSuffix(dt.day)} Day of the ${dt.month}${getOrdinalSuffix(dt.month)} Moon, ${dt.year} AC`;
    }

    function fmtIRL(dt) {
      const tz = Intl.DateTimeFormat().resolvedOptions().timeZone;
      return dt.toLocaleString() + ` (${tz})`;
    }

    const epochDaysBase = abocEpochInDays();

    function tick() {
      const now = new Date();
      const elapsedMs = now - irlEpoch;
      const abocDaysElapsed = elapsedMs / MS_PER_ABOC_DAY_IRL;
      const totalAbocDays = epochDaysBase + abocDaysElapsed;
      const aboc = abocFromTotalDays(totalAbocDays);
      document.getElementById('abocDate').textContent = `${aboc.year}-${String(aboc.month).padStart(2, '0')}-${String(aboc.day).padStart(2, '0')}`;
      document.getElementById('irlNow').textContent = fmtIRL(now);
      document.getElementById('irlElapsed').textContent = `${Math.floor(elapsedMs / 86400000)}d`;
      document.getElementById('epochInfo').textContent = `${IRL_EPOCH_ISO} â†’ ${ABOC_EPOCH.year}-${String(ABOC_EPOCH.month).padStart(2, '0')}-${String(ABOC_EPOCH.day).padStart(2, '0')}`;
    }

    function convertIRLtoABOC() {
      const input = document.getElementById("irlInput").value;
      if (!input) return;
      const date = new Date(input);
      const elapsedMs = date - irlEpoch;
      const abocDaysElapsed = elapsedMs / MS_PER_ABOC_DAY_IRL;
      const totalAbocDays = epochDaysBase + abocDaysElapsed;
      const aboc = abocFromTotalDays(totalAbocDays);
      document.getElementById("abocOutput").textContent = formatABOCDateFancy(aboc);
    }

    function convertABOCtoIRL() {
      const input = document.getElementById("abocInput").value.trim();
      const [y, m, d] = input.split("-").map(Number);
      if (!y || !m || !d) return;
      const abocDays = y * 360 + (m - 1) * 30 + (d - 1);
      const abocDaysSinceEpoch = abocDays - epochDaysBase;
      const msSinceEpoch = abocDaysSinceEpoch * MS_PER_ABOC_DAY_IRL;
      const irl = new Date(irlEpoch.getTime() + msSinceEpoch);
      document.getElementById("irlOutput").textContent = fmtIRL(irl);
    }

    tick();
    setInterval(tick, 500);
  </script>
</body>
</html>
