<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ABOC Live Clock</title>
  <style>
    :root { --bg:#0b1020; --fg:#e7ecff; --muted:#9aa3c7; --card:#11183a; }
    html, body { height: 100%; margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif; background: var(--bg); color: var(--fg); }
    .wrap { max-width: 900px; margin: 0 auto; padding: 32px 20px 64px; }
    h1 { margin: 0 0 12px; font-size: 28px; font-weight: 700; letter-spacing: .3px; }
    .desc { color: var(--muted); margin-bottom: 24px; }
    .card { background: var(--card); border-radius: 16px; padding: 20px; box-shadow: 0 10px 20px rgba(0,0,0,.25); }
    .grid { display: grid; grid-template-columns: 1fr; gap: 16px; }
    .big { font-size: clamp(28px, 5vw, 48px); font-weight: 800; letter-spacing: .5px; }
    .label { color: var(--muted); font-size: 13px; text-transform: uppercase; letter-spacing: .12em; margin-bottom: 6px; }
    .row { display: grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap: 16px; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; }
    .muted { color: var(--muted); }
    .cfg { margin-top: 18px; font-size: 12px; color: var(--muted); }
    .foot { margin-top: 28px; color: var(--muted); font-size: 12px; }
    .converter { background: var(--card); border-radius: 16px; padding: 20px; margin-top: 40px; }
    .converter h2 { margin-top: 0; }
    .converter input { width: 100%; padding: 8px; font-size: 14px; margin-top: 4px; margin-bottom: 12px; background: #1a2347; color: white; border: 1px solid #333; border-radius: 6px; }
    .converter button { padding: 8px 12px; background: #2a3b6a; color: white; border: none; border-radius: 6px; cursor: pointer; margin-top: 4px; }
    .converter button:hover { background: #3c4c7a; }
    .converter .output { margin-top: 10px; font-weight: bold; }
    @media (max-width: 640px) { .row { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>ABOC Live Clock</h1>
    <div class="desc">Live conversion of real time to ABOC time (<strong>2 IRL hours = 1 ABOC day</strong>, <strong>1 IRL month = 1 ABOC year</strong>).</div>

    <div class="card grid">
      <div>
        <div class="label">ABOC Date &amp; Time</div>
        <div id="abocDate" class="big mono">Loadingâ€¦</div>
      </div>

      <div class="row">
        <div>
          <div class="label">Now (IRL)</div>
          <div id="irlNow" class="mono"></div>
        </div>
        <div>
          <div class="label">Time Elapsed Since Lore Start (IRL)</div>
          <div id="irlElapsed" class="mono"></div>
        </div>
      </div>

      <div class="row">
        <div>
          <div class="label">What date(s) did Lore start? (IRL â†’ ABOC)</div>
          <div id="epochInfo" class="mono"></div>
        </div>
        <div>
          <div class="label">Scale</div>
          <div class="mono">2h IRL = 1 day ABOC â€¢ 30 IRL days = 1 year ABOC (360â€‘day year)</div>
        </div>
      </div>

      <div class="cfg">
        Tip: All Lords and event organizers can include the in-lore ABOC date and time for their events or requests. This ensures proper timeline tracking, avoids scheduling conflicts, and maintains consistency with the realm's ongoing chronology.
      </div>
    </div>

    <div class="converter">
      <h2>ðŸ§¼ IRL â†” ABOC Converter</h2>
      <div>
        <label>Convert IRL Date to ABOC:</label>
        <input type="datetime-local" id="irlInput" />
        <button onclick="convertIRLtoABOC()">Convert to ABOC</button>
        <div id="abocOutput" class="output"></div>
      </div>

      <hr style="margin: 20px 0; border: 1px solid #1f2a4c" />

      <div>
        <label>Convert ABOC Date to IRL:</label>
        <input type="text" id="abocInput" placeholder="YYYY-MM-DD or YYYY-MM-DD HH:mm:ss" />
        <button onclick="convertABOCtoIRL()">Convert to IRL</button>
        <div id="irlOutput" class="output"></div>
      </div>
    </div>

    <div class="foot">
      ABOC day length = 24 ABOC hours â‡’ 1 ABOC hour = 5 IRL minutes; 1 ABOC second â‰ˆ 0.0833 IRL seconds.
    </div>
  </div>

  <script>
    const IRL_EPOCH_ISO = '2025-07-15T00:00:00Z';
    const ABOC_EPOCH = { year: 282, month: 5, day: 22, hour: 0, minute: 0, second: 0 };
    const IRL_HOURS_PER_ABOC_DAY = 2;
    const IRL_DAYS_PER_ABOC_YEAR = 30;
    const ABOC_DAYS_PER_YEAR = 360;
    const ABOC_DAYS_PER_MONTH = 30;
    const SECS_PER_ABOC_DAY = 86400;
    const MS_PER_IRL_HOUR = 3600000;
    const MS_PER_ABOC_DAY_IRL = IRL_HOURS_PER_ABOC_DAY * MS_PER_IRL_HOUR;
    const irlEpoch = new Date(IRL_EPOCH_ISO);

    function pad(n, len = 2) { return String(n).padStart(len, '0'); }

    function suffix(n) {
      if (n % 100 >= 11 && n % 100 <= 13) return n + 'th';
      const last = n % 10;
      return n + (last === 1 ? 'st' : last === 2 ? 'nd' : last === 3 ? 'rd' : 'th');
    }

    function abocEpochInDays() {
      const daysFromYears = ABOC_EPOCH.year * ABOC_DAYS_PER_YEAR;
      const daysFromMonths = (ABOC_EPOCH.month - 1) * ABOC_DAYS_PER_MONTH;
      const daysFromDays = ABOC_EPOCH.day - 1;
      const secondsInDay = (ABOC_EPOCH.hour * 3600) + (ABOC_EPOCH.minute * 60) + ABOC_EPOCH.second;
      return daysFromYears + daysFromMonths + daysFromDays + (secondsInDay / SECS_PER_ABOC_DAY);
    }

    function abocFromTotalDays(totalDays) {
      const year = Math.floor(totalDays / ABOC_DAYS_PER_YEAR);
      let remaining = totalDays - year * ABOC_DAYS_PER_YEAR;
      const month = Math.floor(remaining / ABOC_DAYS_PER_MONTH);
      remaining -= month * ABOC_DAYS_PER_MONTH;
      const day = Math.floor(remaining) + 1;
      const dayFrac = remaining - Math.floor(remaining);
      const seconds = Math.floor(dayFrac * SECS_PER_ABOC_DAY);
      const hour = Math.floor(seconds / 3600);
      const minute = Math.floor((seconds % 3600) / 60);
      const second = seconds % 60;
      return { year, month: month + 1, day, hour, minute, second };
    }

    function fmtAboc(dt) {
      return `${dt.year}-${pad(dt.month)}-${pad(dt.day)} ${pad(dt.hour)}:${pad(dt.minute)}:${pad(dt.second)} ABOC`;
    }

    function fmtIRL(dt) {
      return dt.toLocaleDateString();
    }

    const baseDays = abocEpochInDays();

    function convertIRLtoABOC() {
      const input = document.getElementById("irlInput").value;
      if (!input) return;
      const date = new Date(input);
      const diffMs = date - irlEpoch;
      const abocDaysElapsed = diffMs / MS_PER_ABOC_DAY_IRL;
      const aboc = abocFromTotalDays(baseDays + abocDaysElapsed);
      const custom = `${suffix(aboc.day)} Day of the ${suffix(aboc.month)} Moon, ${aboc.year} AC`;
      document.getElementById("abocOutput").textContent = custom;
    }

    function convertABOCtoIRL() {
      const input = document.getElementById("abocInput").value.trim();
      if (!input) return;
      const [datePart, timePart = "00:00:00"] = input.split(" ");
      const [y, m, d] = datePart.split("-").map(Number);
      const [h = 0, min = 0, s = 0] = timePart.split(":".map(Number);
      if (!y || !m || !d) return;
      const totalDays = y * ABOC_DAYS_PER_YEAR + (m - 1) * ABOC_DAYS_PER_MONTH + (d - 1) + ((h * 3600 + min * 60 + s) / SECS_PER_ABOC_DAY);
      const irlDate = new Date(irlEpoch.getTime() + (totalDays - baseDays) * MS_PER_ABOC_DAY_IRL);
      document.getElementById("irlOutput").textContent = fmtIRL(irlDate);
    }

    function tick() {
      const now = new Date();
      const abocDaysElapsed = (now - irlEpoch) / MS_PER_ABOC_DAY_IRL;
      const aboc = abocFromTotalDays(baseDays + abocDaysElapsed);
      document.getElementById("abocDate").textContent = fmtAboc(aboc);
      document.getElementById("irlNow").textContent = now.toLocaleString();
      document.getElementById("irlElapsed").textContent = `${Math.floor((now - irlEpoch) / 86400000)}d`;
      document.getElementById("epochInfo").textContent = `${IRL_EPOCH_ISO} â†’ ${ABOC_EPOCH.year}-${pad(ABOC_EPOCH.month)}-${pad(ABOC_EPOCH.day)} ABOC`;
    }

    setInterval(tick, 1000);
    tick();
  </script>
</body>
</html>
